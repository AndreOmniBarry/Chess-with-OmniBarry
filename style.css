
/* ===== Base page ===== */
html, body { height: 100%; }

body {
  text-align: center;
  font-family: Arial, sans-serif;
  background-color: #f4f4f4;

  /* Helps on iPhone notch devices without changing layout on desktop */
  padding-left: env(safe-area-inset-left, 0px);
  padding-right: env(safe-area-inset-right, 0px);
  padding-top: env(safe-area-inset-top, 0px);
  padding-bottom: env(safe-area-inset-bottom, 0px);
}

/* ===== Board colors ===== */
.light { background-color: #f0d9b5; }
.dark  { background-color: #b58863; }

.selected { outline: 3px solid yellow; }

/* =========================================================
   Responsive board sizing (keeps gameplay JS untouched)
   KEY FIX:
   - use vmin / dvh so the board fits BOTH width and height
   - prevents cut-off rows/pieces on iPhone X and tiny screens
   ========================================================= */

/* Default fallback: fits smallest viewport side (width or height) */
:root{
  --sq: clamp(24px, calc(92vmin / 8), 60px);
}

/* Better on modern mobile browsers with dynamic toolbars */
@supports (height: 100dvh){
  :root{
    /* Use the smaller of width/height so board never overflows */
    --sq: clamp(24px, calc(min(92vw, 92dvh) / 8), 60px);
  }
}

/* The board */
#board{
  display:grid;
  grid-template-columns: repeat(8, var(--sq));
  grid-template-rows: repeat(8, var(--sq));

  width: calc(var(--sq) * 8);
  height: calc(var(--sq) * 8);

  /* Never exceed viewport width */
  max-width: 96vw;

  margin: 20px auto;
  border: 2px solid black;

  /* Better tap behavior on mobile; doesn't affect logic */
  touch-action: manipulation;
}

/* Each square */
.square{
  width: var(--sq);
  height: var(--sq);

  display:flex;
  align-items:center;
  justify-content:center;

  /* Prevent glyph cropping / missing chess symbols on iOS */
  font-family: "Segoe UI Symbol","Apple Color Emoji","Noto Color Emoji", Arial, sans-serif;

  font-size: calc(var(--sq) * 0.62);
  line-height: 1;

  user-select: none;
  -webkit-tap-highlight-color: transparent;
}

/* Small phones (very narrow) */
@media (max-width:420px){
  :root{
    --sq: clamp(22px, calc(94vmin / 8), 54px);
  }
  #board{ margin: 12px auto; }
}

/* iPhone / small screens in landscape (short height is the usual killer) */
@media (max-height:480px) and (orientation: landscape){
  :root{
    --sq: clamp(20px, calc(88vmin / 8), 50px);
  }
  #board{ margin: 10px auto; }
}
